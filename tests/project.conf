targets=appmessage,appserver,tests.log,transport
cppflags_force=-I ../include
cflags_force=-W `pkg-config --cflags libSystem`
cflags=-Wall -g -O2
ldflags_force=`pkg-config --libs libSystem` -lApp
ldflags=-L../src -Wl,-rpath,../src
dist=Makefile,tests.sh

[appmessage]
type=binary
sources=appmessage.c
ldflags=../src/libApp.a

[appmessage.c]
depends=../src/libApp.a

[appserver]
type=binary
sources=appserver.c
ldflags=../src/libApp.a

[appserver.c]
depends=../src/libApp.a

[tests.log]
type=script
script=./tests.sh
depends=appmessage,appserver,tests.sh,transport,../src/transport/tcp.c,../src/transport/udp.c

[transport]
type=binary
sources=transport.c

[transport.c]
depends=../src/libApp.a
